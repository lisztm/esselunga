(function(){window.CMP=window.CMP||{};window.CMP.image=window.CMP.image||{};window.CMP.image.dynamicMedia=function(){function k(a,c){for(var b=a.length,f=0;f<b-1&&a[f]<c;)f++;return a[f].toString()}var d={},l=window.devicePixelRatio||1,g=function(a){var c=new XMLHttpRequest;a=decodeURIComponent(a).split("{.width}")[0]+"?req\x3dset,json";c.open("GET",a,!1);c.onload=function(){if(200<=c.status&&400>c.status){var b=new RegExp(/^{[\s\S]*}$/gmi),a=(new RegExp(/^(?:\/\*jsonp\*\/)?\s*([^()]+)\(([\s\S]+),\s*"[0-9]*"\);?$/gmi)).exec(c.responseText),
e;a&&(a=a[2],b.test(a)&&(e=JSON.parse(a)));if(e&&e.set.relation&&0<e.set.relation.length)for(b=0;b<e.set.relation.length;b++)d[parseInt(e.set.relation[b].userdata.SmartCropWidth)]=":"+e.set.relation[b].userdata.SmartCropDef}};c.send();return d},h=function(a,c){for(var b=a.offsetWidth;20>b&&c&&!a._autoWidth;)b=c.offsetWidth,c=c.parentNode;return b};return{getAutoSmartCrops:g,getSrcSet:function(a){0===Object.keys(d).length&&g(a);if(0<Object.keys(d).length){var c=[];for(var b in d)c.push(a.replace("{.width}",
d[b])+" "+b+"w")}return c.join(",")},getSrc:function(a,c){0===Object.keys(d).length&&g(a);var b=Object.keys(d);return a.replace("{.width}",d[k(b,c)])},setDMAttributes:function(a,c){var b=a.getAttribute("data-cmp-src");b&&(a.matches('[data-cmp-smartcroprendition\x3d"SmartCrop:Auto"]')&&(b=b.replace("{dpr}",l),c.setAttribute("srcset",CMP.image.dynamicMedia.getSrcSet(b))),c.setAttribute("src",CMP.image.dynamicMedia.getSrc(b,h(a,a.parentNode))))},getWidth:h}}()})();